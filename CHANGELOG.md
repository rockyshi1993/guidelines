# 规范体系变更日志# 模型描述与调用规则更新日志



> 记录项目规范文档的重大变更历史，便于追踪演进过程**日期**: 2025-01-28  

**变更类型**: 规范优化

---

---

## [2.1.0] - 2025-10-30 - AI执行入口优化版

## 📋 更新概览

### ✨ Added（新增）

- **优先级决策树**: 将复杂矩阵简化为5步决策树，折叠详细表格到<details>本次更新对 MCP 模型描述和调用规则进行了全面规范化，提升了调度决策的清晰度和一致性。

- **执行示例章节**: 添加4个实际执行案例（findPage功能、Bug修复、大文档优化、代码审查）

- **交互式索引**: README.md新增"我想做...应该读哪里"快速查询表格（16个场景）---

- **快速导航表格**: 5个场景一键直达+操作类型决策矩阵

- **错误恢复策略**: 测试失败、文档不一致、大规模编辑失败的处理流程

### 1. 模型描述重写 (`multi-mcp/mistral/config.json`)

### 🔄 Changed（修改）

- **场景触发器优化**: 场景A-E格式统一，删除冗余后缀#### 变更原则

- **锚点引用修复**: 7处从短格式（#31）改为完整锚点（#31-完整标题）- ✅ 统一格式：所有模型补齐 `note` 字段

- **版本说明明确化**: copilot-instructions.md v2.1（AI入口），v2.md v2.0（完整规范）- ✅ 客观描述：移除"最强"等主观表述，使用"高性能"等客观能力描述

- **README.md精简**: 从原始版本优化为5KB导航文档，删除冗余附录- ✅ 成本标签：明确标注成本/延迟等级（低/中/高）

- **决策矩阵简化**: 主流程使用决策树，详细矩阵折叠到<details>- ✅ 边界清晰：明确适用场景与限制条件

- ✅ 角色定位：区分官方模型与代理（agent）

### 🐛 Fixed（修复）

- **断链修复**: #### 具体变更

  - README.md: 3处断链（copilot-instructions.md路径、删除v1.0引用）

  - v2.md: 9处断链（./templates/ → ../templates/, ./profiles/ → ../profiles/）| 模型 | 旧描述 | 新描述 | 关键改进 |

- **章节引用修复**: 所有章节引用使用完整锚点格式|------|--------|--------|---------|

- **编码问题修复**: PowerShell脚本使用UTF-8无BOM编码| **codestral** | 代码生成和重构专家 | 代码生成与重构专家，专注于代码补全、函数生成、单元测试编写 | ✅ 明确具体能力范围 <br> ✅ 新增成本/延迟标签 <br> ✅ 说明不适用于长篇自然语言推理 |

| **pixtral** | 图像分析和视觉任务 | 多模态视觉理解模型，处理图像分析、OCR、视觉问答任务 | ✅ 强调多模态能力 <br> ✅ 新增格式要求说明 <br> ✅ 明确需要显式图像输入 |

### 📚 Documentation（文档）| **magistral** | 通用推理和复杂问题解决 | 通用推理代理，擅长复杂指令分解、多步骤任务编排、工具调用 | ✅ 明确为"代理"而非基础模型 <br> ✅ 突出工具调用编排能力 <br> ✅ 新增适用场景说明 |

- **v2.md导航增强**: 顶部添加面包屑导航和完整TOC（AI速查+20章节）| **mistral_large** | 最强推理能力，处理极复杂任务 | 高性能通用推理模型，处理长上下文、高精度、极复杂逻辑任务 | ✅ "最强"→"高性能"（客观化） <br> ✅ 明确长上下文支持 <br> ✅ 强调按需启用（成本考虑） |

- **README.md重构**: 分为"AI助手"和"开发者"两部分，添加快速导航| **mistral_small** | 快速响应的轻量级模型 | 轻量快速响应模型，处理简单问答、分类、路由、摘要任务 | ✅ 明确具体任务类型 <br> ✅ 新增"不适用于复杂推理"限制 |

- **模板文档独立**: Bug分析模板、文件模板、自动化脚本移至独立文件| **devstral** | 开发工具专家，代码审查和技术债务分析 | 开发工具链代理，专注代码审查、技术债识别、测试覆盖率分析 | ✅ 明确为"代理"定位 <br> ✅ 新增"仅做静态分析"限制 <br> ✅ 强调不执行构建/部署 |

| **mixtral** | Mixtral-8x7B: 高性价比... | Mixtral-8x7B 混合专家模型，平衡性能与成本的通用推理处理器 | ✅ 简化描述，突出性价比 <br> ✅ 明确与 large/small 的比较 |

---

---

## [2.0.0] - 2025-10-30 - 完整规范AI友好化版本

### 2. 调用规则优化 (`guidelines/mcp-calling-rules.md`)

### ✨ Added（新增）

- **场景触发器系统**: 5个场景（A-E）的IF-THEN规则和强制执行流程#### 新增内容

- **优先级体系**: 🔴强制 > 🟠必须 > 🟡推荐 > 🟢可选，四级分类

- **AI执行速查**: 立即执行规则、关键决策点、禁止操作清单**A. 模型选型决策矩阵**

- **Bug修复分析模板**: 强制记录根本原因、影响对比、修复方案- 📊 新增 7 列维度表格：模型名称、核心能力、适用场景、成本/延迟、委派时机

- **20章节详细规范**: 从基线风格到大规模文件编辑策略- 🎯 新增 5 条选型决策规则：

- **集中式Profile管理**: guidelines/profiles/<project>.md统一配置  1. 优先本地处理

- **MCP调度规则**: AI模型选择与调度规范（v2.md）  2. 成本敏感型选择

  3. 延迟敏感型选择

### 🔄 Changed（修改）  4. 精度优先型选择

- **文档结构重组**:   5. 专业领域型选择

  - copilot-instructions.md: AI执行入口（12KB → 15KB+）

  - README.md: 版本索引和导航入口（5KB）**B. 流程图更新**

  - v2.md: 完整20章节规范（33KB）- 🔄 统一术语："能力评估" → "能力评估：本地是否可高质量完成"

- **Profile策略调整**: 从项目内迁移到根级集中式管理- 🔄 增加步骤："结果验证" → "结果验证：正确性、完整性与安全性"

- **临时文档清理**: 删除IMPROVEMENTS.md、VERIFICATION.md等临时文件- 🔄 优化描述："结果整合" → "本地补充：结合项目规范与上下文"



### 📚 Documentation（文档）---

- **功能添加完整流程**: 3.1章详细说明四要素（代码-测试-示例-文档）

- **大规模编辑策略**: 第20章规定>100行使用PowerShell脚本## 📊 影响分析

- **文档联动规则**: 第6章明确何时必须更新文档

- **示例代码规范**: 第18章规定examples/目录要求### 对开发者的影响

✅ **更清晰的选型指导**：明确成本、延迟、能力边界  

---✅ **避免过度调用**：更准确识别本地可处理的任务  

✅ **成本优化**：通过决策矩阵合理选择模型等级

## [1.0.0] - 2025-01-20 - 初始版本

### 对 AI 助手的影响

### ✨ Added（新增）✅ **统一调度逻辑**：基于标准化的模型描述做决策  

- **基线风格规范**: 缩进、行结尾、编码标准✅ **减少冗余调用**：清晰的适用场景避免试错  

- **Profile选择策略**: 项目级配置覆盖机制✅ **提升用户体验**：更快响应（优先本地+合理委派）

- **提交与PR规范**: Conventional Commits、PR模板

- **分支与发布流程**: SemVer版本管理---

- **文档策略**: README/CHANGELOG/STATUS维护规则

- **测试与质量标准**: 覆盖率门槛、测试框架## 🔍 质量保证

- **多语言支持**: Node.js/Python/Go/Java/Rust默认命令

### 验证检查项

### 📚 Documentation（文档）- ✅ JSON 格式验证通过（config.json）

- **单一guidelines.md**: 初始版本合并所有规范- ✅ Markdown 语法检查通过（mcp-calling-rules.md）

- **.editorconfig模板**: 统一编辑器配置- ✅ 所有模型 `note` 字段完整

- **.gitattributes模板**: 行结尾规范化- ✅ 描述术语一致性（代理 vs 模型）

- ✅ 成本/延迟标签完整（低/中/高）

---

---

## 版本说明

## 📝 后续建议

### 版本号规则

- **主版本号**: 破坏性变更或重大重构### 短期优化

- **次版本号**: 新增功能或重要优化1. **实测验证**：在实际项目中测试新的选型矩阵效果

- **修订号**: Bug修复或小改进2. **成本监控**：记录各模型调用频率与成本，优化决策规则

3. **文档同步**：将模型描述同步到项目 README.md

### 当前版本关系

```### 长期优化

guidelines/1. **动态调度**：基于实时成本/负载动态选择模型

├── .github/copilot-instructions.md   # v2.1.0 - AI执行入口优化版2. **A/B 测试**：对比本地处理 vs 委派的质量差异

├── guidelines/v2.md                   # v2.0.0 - 完整规范AI友好化版本3. **用户反馈**：收集用户对响应速度/质量的评价

├── mcp/v2.md                          # v2.0.0 - MCP调度规则

└── CHANGELOG.md                       # 本文件 - 规范体系变更历史---

```

## 📚 相关文件

### 迁移建议

- **从v1.0升级**: 阅读v2.0变更日志，重点关注场景触发器和优先级体系- `multi-mcp/mistral/config.json` - 模型配置

- **AI助手**: 始终从copilot-instructions.md v2.1开始- `guidelines/mcp-calling-rules.md` - 调用规则

- **开发者**: 使用README.md交互式索引快速定位- `.github/copilot-instructions.md` - Copilot 使用说明（引用规则）



------



## 变更类型说明**变更作者**: GitHub Copilot  

**审核状态**: 待人工审核

- ✨ **Added（新增）**: 新功能、新章节、新模板

- 🔄 **Changed（修改）**: 现有功能的改进或重构---

- 🐛 **Fixed（修复）**: Bug修复、断链修复

- 📚 **Documentation（文档）**: 纯文档更新## 2025-10-28 补充

- ⚠️ **Deprecated（弃用）**: 即将移除的功能

- 🗑️ **Removed（移除）**: 已删除的功能或文件- 更新 `guidelines/mcp-rule.md`：

- 🔒 **Security（安全）**: 安全相关修复  - 明确“默认模型职责范围（强制）”：仅限意图分析、MCP 调用、结果整合与转发

  - 调整选型原则为“适配性优先，兼顾时间与成本”，并给出冲突处理准则

---- 同步说明模型选择时的优先级顺序：能力适配度 > 时延/响应时间（SLA） > 成本预算


## 统计数据

### v2.1.0优化成果
- **文档精简**: README.md从35KB压缩到5KB（节省86%）
- **导航优化**: 新增16个交互式索引场景
- **断链修复**: 修复12处断链（README 3处 + v2.md 9处）
- **检查覆盖**: 健康检查脚本包含4大检查项
- **执行示例**: 添加4个完整执行案例（平均耗时3-10分钟）

### 文档规模对比
| 版本 | copilot-instructions.md | v2.md | README.md | 总计 |
|------|------------------------|-------|-----------|------|
| v1.0 | - | 35KB | - | 35KB |
| v2.0 | 12KB | 33KB | 35KB | 80KB |
| v2.1 | 15KB | 33KB | 5KB | 53KB |

---

**维护者**: GitHub Copilot + 项目团队  
**更新频率**: 重大变更时更新  
**参考规范**: [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)
