# 全局配置 GitHub Copilot 使用 v3 规范

> **配置类型**: 全局配置（个人使用）  
> **配置日期**: 2025-11-20

---

## 🎯 配置步骤

### 步骤1: 打开全局配置文件

**方法1: 通过 VS Code UI（推荐）**

1. 打开 VS Code
2. 按 `Ctrl+Shift+P`
3. 输入：`Preferences: Open User Settings (JSON)`
4. 按回车，会打开全局配置文件

**方法2: 手动打开**

文件位置：
```
C:\Users\{你的用户名}\AppData\Roaming\Code\User\settings.json
```

---

### 步骤2: 添加配置

在打开的 `settings.json` 文件中，添加以下配置：

```json
{
  // ...你现有的其他配置...
  
  "github.copilot.chat.codeGeneration.instructions": [
    {
      "text": "你必须严格遵守 guidelines/v3.md 中定义的所有规范"
    },
    {
      "text": "你必须按照 23个STEP 执行流程，在 STEP 7/10/12/14/16 等待用户确认"
    },
    {
      "text": "代码覆盖率必须≥80%，复杂度≤10，0敏感信息泄露"
    },
    {
      "text": "你必须生成完整的代码、测试、文档和Swagger"
    }
  ],
  "github.copilot.chat.localeOverride": "zh-CN"
}
```

**注意**: 
- 如果你的配置文件不是空的，记得在现有配置后面加逗号
- 不要重复已有的配置项

---

### 步骤3: 保存并重启

1. 保存文件（`Ctrl+S`）
2. 重启 VS Code 或重新加载窗口（`Ctrl+Shift+P` → "Reload Window"）

---

## ⚠️ 重要说明

### 关于规范文件路径

全局配置中引用 `guidelines/v3.md`，这意味着：

**你需要确保每个项目都有规范文件**：

```
你的项目/
├── guidelines/
│   └── v3.md          ← 主规范文件
└── specs/
    ├── core/          ← 核心规范
    ├── rules/         ← 规则规范
    └── output/        ← 输出规范
```

### 解决方案

**选项1: 复制规范文件到每个项目**

从 `D:\OneDrive\Project\common\guidelines\` 复制到你的项目：

```powershell
# 复制到你的项目
Copy-Item -Path "D:\OneDrive\Project\common\guidelines\guidelines" -Destination "你的项目路径\" -Recurse
Copy-Item -Path "D:\OneDrive\Project\common\guidelines\specs" -Destination "你的项目路径\" -Recurse
```

**选项2: 修改配置为条件引用**

如果你不想每个项目都复制规范文件，可以修改配置：

```json
{
  "github.copilot.chat.codeGeneration.instructions": [
    {
      "text": "如果项目中存在 guidelines/v3.md，你必须严格遵守其中定义的所有规范"
    },
    {
      "text": "代码覆盖率必须≥80%，复杂度≤10，0敏感信息泄露"
    },
    {
      "text": "你必须生成完整的代码、测试、文档"
    }
  ],
  "github.copilot.chat.localeOverride": "zh-CN"
}
```

---

## ✅ 验证配置

### 测试步骤

1. 打开任意项目（最好是有 `guidelines/v3.md` 的项目）
2. 打开 Copilot Chat
3. 发送消息：`帮我创建一个用户登录函数`
4. 检查响应：

**预期响应**：
```
✅ 收到！我将按照规范执行：

STEP 0: 正在扫描 Profile 和禁止项...
STEP 1: 分析你的意图...
识别到意图: Intent-02 (开发新功能)
...
```

如果 Copilot 这样响应，说明配置生效了！

---

## 📋 完整示例

### 假设你的全局配置文件原本是这样：

```json
{
  "editor.fontSize": 14,
  "workbench.colorTheme": "Dark+"
}
```

### 添加 Copilot 配置后应该是：

```json
{
  "editor.fontSize": 14,
  "workbench.colorTheme": "Dark+",
  "github.copilot.chat.codeGeneration.instructions": [
    {
      "text": "你必须严格遵守 guidelines/v3.md 中定义的所有规范"
    },
    {
      "text": "你必须按照 23个STEP 执行流程，在 STEP 7/10/12/14/16 等待用户确认"
    },
    {
      "text": "代码覆盖率必须≥80%，复杂度≤10，0敏感信息泄露"
    },
    {
      "text": "你必须生成完整的代码、测试、文档和Swagger"
    }
  ],
  "github.copilot.chat.localeOverride": "zh-CN"
}
```

---

## 🎯 全局配置的优势

### 优点
- ✅ 配置一次，所有项目自动生效
- ✅ 不需要每个项目单独配置
- ✅ 个人开发非常方便

### 缺点
- ❌ 不能通过 Git 与团队共享
- ❌ 需要每个项目都有规范文件
- ❌ 新电脑需要重新配置

### 适合场景
- ✅ 个人开发
- ✅ 多个项目使用相同规范
- ✅ 不需要团队协作

---

## 💡 建议

### 推荐做法

1. **配置全局设置**（如上所示）
2. **创建规范文件模板**
   - 将 `guidelines/` 和 `specs/` 作为模板
   - 新项目时复制这些文件
3. **可选使用 #file 引用**
   - 需要精确控制时：`#file:guidelines/v3.md`

### 维护建议

- 规范文件统一管理在 `D:\OneDrive\Project\common\guidelines\`
- 新项目时从这里复制
- 更新规范时，在所有项目中同步更新

---

## 🚀 快速开始

1. **打开全局配置**: `Ctrl+Shift+P` → "Open User Settings (JSON)"
2. **复制粘贴上面的配置**
3. **保存并重启 VS Code**
4. **测试验证**: 在 Copilot Chat 中发送消息

---

**配置完成后，你的所有项目都会自动使用 v3 规范！** 🎉

---

**文档创建**: 2025-11-20  
**配置类型**: 全局配置  
**状态**: ✅ 可用

