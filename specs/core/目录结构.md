# v3 ç›®å½•ç»“æ„è§„èŒƒ

> **æ–‡ä»¶**: specs/core/ç›®å½•ç»“æ„.md  
> **ç‰ˆæœ¬**: v3.0  
> **æ—¥æœŸ**: 2025-11-20  
> **è¯´æ˜**: AI ç”Ÿæˆçš„ç›®å½•ç»“æ„è§„èŒƒ

---

## ğŸ“‚ ç›®å½•åˆ†ç±»åŸåˆ™

### æŒ‰æ¨¡å—èšåˆçš„ç›®å½•ï¼ˆ3ä¸ªï¼‰

è¿™äº›ç›®å½•éœ€è¦æŒ‰æ¨¡å—åˆ›å»ºå­ç›®å½•ï¼š

1. **reports/{æ¨¡å—å}/** - æŠ¥å‘Šç›®å½•
2. **plans/{æ¨¡å—å}/** - æ–¹æ¡ˆç›®å½•
3. **docs/{æ¨¡å—å}/** - æ–‡æ¡£ç›®å½•

### ä¸æŒ‰æ¨¡å—åˆ†çš„ç›®å½•ï¼ˆ4ä¸ªï¼‰

è¿™äº›ç›®å½•ä¸æŒ‰æ¨¡å—åˆ†ï¼Œæ–‡ä»¶ååŒ…å«æ¨¡å—æ ‡è¯†ï¼š

4. **test/** - æµ‹è¯•ç›®å½•
5. **scripts/** - è„šæœ¬ç›®å½•
6. **configs/** - é…ç½®ç›®å½•
7. **deploy/** - éƒ¨ç½²ç›®å½•

---

## ğŸ—‚ï¸ å®Œæ•´ç›®å½•ç»“æ„

```
é¡¹ç›®æ ¹ç›®å½•/
â”‚
â”œâ”€â”€ STATUS.md                   # é¡¹ç›®æ•´ä½“çŠ¶æ€ï¼ˆAIè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ CHANGELOG.md                # æ•´ä½“å˜æ›´æ¦‚è§ˆï¼ˆAIè‡ªåŠ¨æ±‡æ€»ï¼‰
â”œâ”€â”€ README.md                   # é¡¹ç›®è¯´æ˜ï¼ˆä¸å«Gitæ•™ç¨‹ï¼‰
â”‚
â”œâ”€â”€ reports/{æ¨¡å—å}/           # 1ï¸âƒ£ æŠ¥å‘Šç›®å½•ï¼ˆAIç”Ÿæˆï¼ŒæŒ‰æ¨¡å—èšåˆï¼‰
â”‚   â”œâ”€â”€ .temp/                  # ä¸´æ—¶æ–¹æ¡ˆï¼ˆéœ€æ±‚åˆ†æé˜¶æ®µï¼‰
â”‚   â”‚   â”œâ”€â”€ analysis-part-*.md         # åˆ†æ®µåˆ†ææ–‡ä»¶
â”‚   â”‚   â””â”€â”€ analysis-plan-*.md         # éœ€æ±‚åˆ†ææŠ¥å‘Šï¼ˆå¾…ç¡®è®¤ï¼‰
â”‚   â”œâ”€â”€ final/                  # æœ€ç»ˆæ–¹æ¡ˆï¼ˆç”¨æˆ·ç¡®è®¤åï¼‰
â”‚   â”‚   â”œâ”€â”€ implementation-plan-*.md   # å®ç°æ–¹æ¡ˆ
â”‚   â”‚   â””â”€â”€ execution-result-*.md      # æ‰§è¡Œç»“æœæŠ¥å‘Š
â”‚   â”œâ”€â”€ bugfix/                 # Bugä¿®å¤æŠ¥å‘Š
â”‚   â”œâ”€â”€ feature/                # åŠŸèƒ½è®¾è®¡æŠ¥å‘Š
â”‚   â”œâ”€â”€ review/                 # ä»£ç å®¡æŸ¥æŠ¥å‘Š
â”‚   â”œâ”€â”€ analysis/               # ç³»ç»Ÿåˆ†ææŠ¥å‘Š
â”‚   â”œâ”€â”€ refactor/               # é‡æ„æ–¹æ¡ˆæŠ¥å‘Š
â”‚   â”œâ”€â”€ performance/            # æ€§èƒ½ä¼˜åŒ–æŠ¥å‘Š
â”‚   â”œâ”€â”€ security/               # å®‰å…¨æ£€æŸ¥æŠ¥å‘Š
â”‚   â”œâ”€â”€ dependency/             # ä¾èµ–æ›´æ–°æŠ¥å‘Š
â”‚   â”œâ”€â”€ migration/              # æ•°æ®è¿ç§»æŠ¥å‘Š
â”‚   â”œâ”€â”€ api-test/               # APIæµ‹è¯•æŠ¥å‘Š
â”‚   â”œâ”€â”€ logs/                   # æ—¥å¿—åˆ†ææŠ¥å‘Š
â”‚   â””â”€â”€ queries/                # æŸ¥è¯¢ç»“æœæŠ¥å‘Š
â”‚
â”œâ”€â”€ plans/{æ¨¡å—å}/             # 2ï¸âƒ£ æ–¹æ¡ˆç›®å½•ï¼ˆAIç”Ÿæˆï¼ŒæŒ‰æ¨¡å—èšåˆï¼‰
â”‚   â”œâ”€â”€ IMPLEMENTATION.md       # å®ç°æ–¹æ¡ˆï¼ˆæŒç»­åŒæ­¥æ›´æ–°ï¼‰
â”‚   â”‚   # ä» reports/{æ¨¡å—å}/final/ åŒæ­¥ï¼Œå¹¶æŒç»­ç»´æŠ¤
â”‚   â”‚   # âš ï¸ å¿…é¡»ä¸å®é™…ä»£ç ä¿æŒåŒæ­¥
â”‚   â”œâ”€â”€ STATUS.md               # æ¨¡å—çŠ¶æ€ï¼ˆAIè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚   â””â”€â”€ CHANGELOG.md            # æ¨¡å—è¯¦ç»†å˜æ›´æ—¥å¿—ï¼ˆAIè‡ªåŠ¨è®°å½•ï¼‰
â”‚
â”œâ”€â”€ docs/{æ¨¡å—å}/              # 3ï¸âƒ£ æ–‡æ¡£ç›®å½•ï¼ˆAIç”Ÿæˆï¼ŒæŒ‰æ¨¡å—èšåˆï¼‰
â”‚   â”œâ”€â”€ README.md               # æ¨¡å—è¯´æ˜
â”‚   â”œâ”€â”€ ARCHITECTURE.md         # æ¶æ„æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰
â”‚   â”œâ”€â”€ api/                    # APIæ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ openapi.yaml        # Swaggeræ–‡æ¡£ï¼ˆæ ¹æ®æ¥å£è‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚   â”‚   â””â”€â”€ endpoints.md        # æ¥å£è¯´æ˜
â”‚   â””â”€â”€ examples/               # ç¤ºä¾‹ä»£ç 
â”‚       â””â”€â”€ *.js/ts
â”‚
â”œâ”€â”€ test/                       # 4ï¸âƒ£ æµ‹è¯•ç›®å½•ï¼ˆAIç”Ÿæˆï¼Œä¸æŒ‰æ¨¡å—åˆ†ï¼‰
â”‚   â”œâ”€â”€ {æ¨¡å—å}-unit.test.js          # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ {æ¨¡å—å}-integration.test.js   # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ {æ¨¡å—å}-e2e.test.js           # E2Eæµ‹è¯•
â”‚   â”œâ”€â”€ {æ¨¡å—å}-api.test.js           # APIæµ‹è¯•
â”‚   â””â”€â”€ {æ¨¡å—å}-benchmark.test.js     # åŸºå‡†æµ‹è¯•
â”‚   
â”‚   æ³¨æ„: æ£€æµ‹å¹¶é€‚é…ç°æœ‰æµ‹è¯•ç›®å½•ç»“æ„
â”‚         - å¦‚æœé¡¹ç›®å·²æœ‰ test/ æˆ– tests/ï¼Œä½¿ç”¨ç°æœ‰ç»“æ„
â”‚         - æµ‹è¯•æ–‡ä»¶ä¸åˆ†å­ç›®å½•ï¼Œç›´æ¥åœ¨æ ¹ç›®å½•
â”‚         - æ–‡ä»¶åæ ¼å¼: {æ¨¡å—å}-{ç±»å‹}.test.js
â”‚
â”œâ”€â”€ scripts/                    # 5ï¸âƒ£ è„šæœ¬ç›®å½•ï¼ˆAIç”Ÿæˆï¼Œä¸æŒ‰æ¨¡å—åˆ†ï¼‰
â”‚   â”œâ”€â”€ {æ¨¡å—å}-build.js              # æ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ {æ¨¡å—å}-migrate.js            # è¿ç§»è„šæœ¬
â”‚   â””â”€â”€ {æ¨¡å—å}-deploy.js             # éƒ¨ç½²è„šæœ¬
â”‚   
â”‚   æ³¨æ„: è„šæœ¬è¯­è¨€éµä» Profile æŒ‡å®š
â”‚         - é»˜è®¤ .js
â”‚         - Profileå¯æŒ‡å®š .sh/.py/.ts
â”‚         - æ–‡ä»¶åæ ¼å¼: {æ¨¡å—å}-{åŠŸèƒ½}.{ext}
â”‚
â”œâ”€â”€ configs/                    # 6ï¸âƒ£ é…ç½®ç›®å½•ï¼ˆAIç”Ÿæˆï¼Œä¸æŒ‰æ¨¡å—åˆ†ï¼‰
â”‚   â”œâ”€â”€ config.json
â”‚   â”œâ”€â”€ config.dev.json
â”‚   â”œâ”€â”€ config.test.json
â”‚   â””â”€â”€ config.prod.json
â”‚
â””â”€â”€ deploy/                     # 7ï¸âƒ£ éƒ¨ç½²ç›®å½•ï¼ˆAIç”Ÿæˆï¼Œä¸æŒ‰æ¨¡å—åˆ†ï¼‰
    â”œâ”€â”€ README.md
    â”œâ”€â”€ docker-compose.yml
    â”œâ”€â”€ Dockerfile
    â””â”€â”€ scripts/
        â”œâ”€â”€ deploy.js
        â”œâ”€â”€ rollback.js
        â””â”€â”€ health-check.js
```

---

## ğŸ“‹ æ–‡ä»¶å‘½åè§„èŒƒ

### æµ‹è¯•æ–‡ä»¶

**æ ¼å¼**: `{æ¨¡å—å}-{ç±»å‹}.test.js`

**ç¤ºä¾‹**:
```
test/user-auth-unit.test.js
test/user-auth-integration.test.js
test/order-api.test.js
test/payment-benchmark.test.js
```

**ä¸ä½¿ç”¨**:
```
âŒ test/unit/user-auth.test.js
âŒ test/{æ¨¡å—å}/unit/*.test.js
```

### è„šæœ¬æ–‡ä»¶

**æ ¼å¼**: `{æ¨¡å—å}-{åŠŸèƒ½}.{ext}`

**ç¤ºä¾‹**:
```
scripts/user-auth-build.js
scripts/order-migrate.js
scripts/payment-deploy.sh
```

**ä¸ä½¿ç”¨**:
```
âŒ scripts/general/build-user-auth.js
âŒ scripts/{ç±»å‹}/{æ¨¡å—å}-*.js
```

### æŠ¥å‘Šæ–‡ä»¶

**æ ¼å¼**: `{ç±»å‹}-{timestamp}.md`

**ç¤ºä¾‹**:
```
reports/user-auth/.temp/analysis-plan-20251120-143000.md
reports/user-auth/final/implementation-plan-20251120-150000.md
reports/user-auth/bugfix/bug-fix-001.md
```

---

## ğŸ”„ ä¸´æ—¶æ–¹æ¡ˆä¸æœ€ç»ˆæ–¹æ¡ˆ

### æµç¨‹

```
STEP 6: ç”Ÿæˆéœ€æ±‚åˆ†ææŠ¥å‘Š
  â†’ reports/{æ¨¡å—å}/.temp/analysis-plan-{timestamp}.md

STEP 7: ç”¨æˆ·ç¡®è®¤

STEP 8: ç”¨æˆ·ç¡®è®¤åï¼Œå‡çº§ä¸ºå®ç°æ–¹æ¡ˆ
  â†’ reports/{æ¨¡å—å}/final/implementation-plan-{timestamp}.md

STEP 15: åŒæ­¥åˆ°æ–¹æ¡ˆç›®å½•
  â†’ plans/{æ¨¡å—å}/IMPLEMENTATION.md
  âš ï¸ æ­¤åå¿…é¡»æŒç»­åŒæ­¥æ›´æ–°

ä»£ç ä¿®æ”¹æ—¶:
  â†’ æ›´æ–° plans/{æ¨¡å—å}/IMPLEMENTATION.md
  â†’ è®°å½•ç‰ˆæœ¬å˜æ›´
  â†’ è¯´æ˜ä¿®æ”¹åŸå› 
```

### ç›®å½•ç»“æ„

```
/reports/{æ¨¡å—å}/
  â”œâ”€â”€ .temp/                           # ä¸´æ—¶æ–¹æ¡ˆï¼ˆéœ€æ±‚åˆ†æé˜¶æ®µï¼‰
  â”‚   â”œâ”€â”€ analysis-part-*.md           # åˆ†æ®µåˆ†ææ–‡ä»¶
  â”‚   â””â”€â”€ analysis-plan-*.md           # éœ€æ±‚åˆ†ææŠ¥å‘Šï¼ˆå¾…ç¡®è®¤ï¼‰
  â””â”€â”€ final/                           # æœ€ç»ˆæ–¹æ¡ˆï¼ˆç”¨æˆ·ç¡®è®¤åï¼‰
      â”œâ”€â”€ implementation-plan-*.md     # å®ç°æ–¹æ¡ˆ
      â””â”€â”€ execution-result-*.md        # æ‰§è¡Œç»“æœæŠ¥å‘Š
```

---

## ğŸ” ç›®å½•æ£€æµ‹é€»è¾‘

### æµ‹è¯•ç›®å½•é€‚é…

```yaml
IF: Profile æŒ‡å®šæµ‹è¯•ç›®å½•
  ä½¿ç”¨ Profile æŒ‡å®šçš„ç›®å½•

ELSE IF: é¡¹ç›®å·²æœ‰ test/ ç›®å½•
  ä½¿ç”¨ test/ ç»“æ„ï¼ˆä¸æŒ‰æ¨¡å—åˆ†ï¼‰

ELSE IF: é¡¹ç›®å·²æœ‰ tests/ ç›®å½•
  ä½¿ç”¨ tests/ ç»“æ„ï¼ˆä¸æŒ‰æ¨¡å—åˆ†ï¼‰

ELSE:
  åˆ›å»º test/ ç»“æ„ï¼ˆæ¨èå•æ•°å½¢å¼ï¼Œä¸æŒ‰æ¨¡å—åˆ†ï¼‰
```

**ç¤ºä¾‹**:
```
ç°æœ‰é¡¹ç›®ç»“æ„: test/
AI ç”Ÿæˆä½ç½®: test/user-auth-unit.test.js

ç°æœ‰é¡¹ç›®ç»“æ„: tests/
AI ç”Ÿæˆä½ç½®: tests/user-auth-unit.test.js

æ³¨æ„: æµ‹è¯•æ–‡ä»¶ä¸åˆ†å­ç›®å½•ï¼Œæ–‡ä»¶ååŒ…å«æ¨¡å—åå’Œç±»å‹
```

---

## ğŸ“Š è·¯å¾„å¯¹æ¯”

### âŒ é”™è¯¯ç¤ºä¾‹ï¼ˆæŒ‰ç±»å‹åˆ†æ•£ï¼‰

```
/reports/bugfix/user-auth/
/reports/feature/user-auth/
/reports/review/user-auth/
```

### âœ… æ­£ç¡®ç¤ºä¾‹ï¼ˆreportsæŒ‰æ¨¡å—èšåˆï¼‰

```
/reports/user-auth/
  â”œâ”€â”€ .temp/
  â”œâ”€â”€ final/
  â”œâ”€â”€ bugfix/
  â”œâ”€â”€ feature/
  â””â”€â”€ review/
```

### âœ… æ­£ç¡®ç¤ºä¾‹ï¼ˆplansæŒ‰æ¨¡å—èšåˆï¼‰

```
/plans/user-auth/
  â”œâ”€â”€ IMPLEMENTATION.md
  â”œâ”€â”€ STATUS.md
  â””â”€â”€ CHANGELOG.md
```

### âœ… æ­£ç¡®ç¤ºä¾‹ï¼ˆdocsæŒ‰æ¨¡å—èšåˆï¼‰

```
/docs/user-auth/
  â”œâ”€â”€ README.md
  â””â”€â”€ api/
```

### âœ… æ­£ç¡®ç¤ºä¾‹ï¼ˆtestä¸æŒ‰æ¨¡å—åˆ†ï¼‰

```
/test/
  â”œâ”€â”€ user-auth-unit.test.js
  â”œâ”€â”€ user-auth-integration.test.js
  â”œâ”€â”€ order-unit.test.js
  â””â”€â”€ order-api.test.js
```

---

## âš™ï¸ ç‰¹æ®Šè¯´æ˜

### 1. srcç›®å½•

**AI ä¸ç®¡ç† src ç›®å½•**
- src ç›®å½•ç”±é¡¹ç›®è‡ªè¡Œç®¡ç†
- AI åªè´Ÿè´£ 7 ä¸ªè§„èŒƒç›®å½•
- ä»£ç å¼€å‘æ—¶éµå¾ªé¡¹ç›®å·²æœ‰çš„ src ç»“æ„

### 2. è„šæœ¬è¯­è¨€é€‰æ‹©

```yaml
ä¼˜å…ˆçº§:
  1. Profile æŒ‡å®šçš„è¯­è¨€ (æœ€é«˜ä¼˜å…ˆçº§)
  2. é¡¹ç›®å·²æœ‰è„šæœ¬çš„è¯­è¨€
  3. é»˜è®¤ .js

ç¤ºä¾‹:
  IF: Profile æŒ‡å®š shell
    ç”Ÿæˆ: scripts/{æ¨¡å—å}-build.sh
  ELSE IF: é¡¹ç›®å·²æœ‰ .py è„šæœ¬
    ç”Ÿæˆ: scripts/{æ¨¡å—å}-build.py
  ELSE:
    ç”Ÿæˆ: scripts/{æ¨¡å—å}-build.js
```

### 3. é…ç½®æ–‡ä»¶

```yaml
ç»Ÿä¸€ç®¡ç†:
  - ä¸æŒ‰æ¨¡å—åˆ†
  - æŒ‰ç¯å¢ƒåˆ†: dev/test/prod
  - æ ¼å¼: config.{env}.json

ç¤ºä¾‹:
  configs/config.json         # é»˜è®¤é…ç½®
  configs/config.dev.json     # å¼€å‘ç¯å¢ƒ
  configs/config.test.json    # æµ‹è¯•ç¯å¢ƒ
  configs/config.prod.json    # ç”Ÿäº§ç¯å¢ƒ
```

### 4. éƒ¨ç½²ç›®å½•

```yaml
ç»Ÿä¸€ç®¡ç†:
  - ä¸æŒ‰æ¨¡å—åˆ†
  - åŒ…å«æ‰€æœ‰æ¨¡å—çš„éƒ¨ç½²é…ç½®
  - Dockeré…ç½®ã€éƒ¨ç½²è„šæœ¬ã€å¥åº·æ£€æŸ¥ç­‰

ç¤ºä¾‹:
  deploy/
    â”œâ”€â”€ README.md
    â”œâ”€â”€ docker-compose.yml    # æ‰€æœ‰æœåŠ¡
    â”œâ”€â”€ Dockerfile
    â””â”€â”€ scripts/
        â”œâ”€â”€ deploy.js         # éƒ¨ç½²æ‰€æœ‰æ¨¡å—
        â”œâ”€â”€ rollback.js       # å›æ»š
        â””â”€â”€ health-check.js   # å¥åº·æ£€æŸ¥
```

---

## ğŸ“ åˆ›å»ºç›®å½•çš„æ—¶æœº

### è‡ªåŠ¨åˆ›å»º

- reports/{æ¨¡å—å}/ - STEP 6 ç”ŸæˆæŠ¥å‘Šæ—¶
- plans/{æ¨¡å—å}/ - STEP 15 åŒæ­¥æ–¹æ¡ˆæ—¶
- docs/{æ¨¡å—å}/ - STEP 15 ç”Ÿæˆæ–‡æ¡£æ—¶

### æŒ‰éœ€åˆ›å»º

- test/ - STEP 11 ç¼–å†™æµ‹è¯•æ—¶ï¼ˆå¦‚ä¸å­˜åœ¨ï¼‰
- scripts/ - è„šæœ¬ç”Ÿæˆæ„å›¾æ—¶
- configs/ - é…ç½®ä¿®æ”¹æ„å›¾æ—¶
- deploy/ - éƒ¨ç½²æ“ä½œæ„å›¾æ—¶

### ä¸è‡ªåŠ¨åˆ›å»º

- src/ - ç”±é¡¹ç›®ç®¡ç†ï¼ŒAI ä¸åˆ›å»º

---

**æ–‡ä»¶åˆ›å»º**: 2025-11-20  
**æœ€åæ›´æ–°**: 2025-11-20  
**çŠ¶æ€**: âœ… å®Œæ•´

