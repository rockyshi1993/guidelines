# Bug 修复分析模板

## 目的
在修复 Bug 前，必须深入理解：
1. **为什么会有问题**（根本原因）
2. **修复与不修复的区别**（影响对比）
3. **为什么那样修复**（方案选择）

这样可以：
- ✅ 避免重复犯错
- ✅ 积累团队知识
- ✅ 提高代码质量意识
- ✅ 帮助新成员快速理解系统

---

## 模板结构

### 1. 问题概述
**一句话描述问题**：简洁说明发生了什么

### 2. 根本原因分析（Why）
**为什么会有这个问题？**

需要回答：
- 技术原因（竞态条件、内存泄漏、逻辑错误等）
- 设计缺陷（架构问题、边界处理缺失等）
- 编码疏忽（验证缺失、资源未释放等）

**关键点**：
- 从现象深入到本质
- 使用技术术语准确描述
- 包含代码示例说明问题

### 3. 影响对比（Impact）
**修复与不修复的区别在哪？**

| 维度 | 不修复的后果 | 修复后的效果 |
|------|-------------|-------------|
| **功能** | 描述功能异常 | 描述正常行为 |
| **性能** | 性能影响（如内存泄漏） | 性能改善 |
| **稳定性** | 崩溃/错误场景 | 稳定运行 |
| **安全性** | 潜在安全风险 | 风险消除 |
| **用户体验** | 用户遇到的问题 | 改善情况 |

**触发条件**：
- 什么场景下会暴露问题
- 复现概率（必现/偶现/高并发）

### 4. 修复方案（How）
**为什么选择这个修复方案？**

#### 方案对比
列出考虑过的方案，说明选择原因：

| 方案 | 优点 | 缺点 | 是否采用 | 原因 |
|------|------|------|---------|------|
| 方案A | ... | ... | ✅/❌ | ... |
| 方案B | ... | ... | ✅/❌ | ... |

#### 实施细节
- 修改了哪些文件
- 核心改动是什么
- 为什么这样改动

#### 风险评估
- 是否有破坏性变更
- 是否影响现有功能
- 是否需要数据迁移

### 5. 验证方法
**如何证明问题已修复？**

- 测试用例（单元测试、集成测试）
- 验证步骤（手动验证）
- 性能对比（如内存使用）

### 6. 经验教训
**从这个问题学到了什么？**

- 编码规范（如何避免）
- 审查重点（代码审查时注意什么）
- 最佳实践（推荐的做法）

---

---

## 参考示例

完整的 Bug 分析示例已移至独立文件：

- 📋 [并发连接问题修复分析示例](../examples/bug-analysis-example.md) - 展示如何使用本模板进行完整的 Bug 分析
